# 7. Metody szyfrowania i kompresji danych
### Kompresja danych
***Kompresja danych*** polega na zmianie sposobu zapisu informacji tak, aby zmniejszyć redundancję i tym samym objętość zbioru ale bez utraty ich treści (oraz jakości). W dużym uproszczeniu każdy plik (a przynajmniej ich znakomita większość) posiada w swej strukturze pewne powtarzające się wyrażenia, czy fragmenty wyrażeń. Najprościej rzecz ujmując, jeśli kompresujemy przykładowo plik tekstowy, zawierający dziesięć razy wyrażenie „CoreBlog.pl”, które de facto składa się z 11 znaków, to program archiwizujący w celu ograniczenia liczby znaków, może określić sobie, że każde to wyrażenie zastąpi jednym czy dwoma znakami, np. „CB”. W tym przypadku zamiast 11 liter używamy tylko 2, co daje oszczędność 9 znaków na wyrażenie. W przypadku całego tekstu, gdzie znajdowało się 10-krotne powtórzenie „CoreBlog.pl” jest to oszczędność 90-ciu znaków! Oczywiście nie można zapomnieć, że wewnątrz pliku musi się też znajdować odpowiedni wpis, który poinformuje program dekompresujący, że przy wypakowywaniu pliku musi wyrażenie „CB” zastąpić wyrażeniem „CoreBlog.pl”. Biorąc pod uwagę, że w takim pliku tekstowym wyrażeń powtarzających się może być znacznie więcej, a każde z nich można spokojnie zredukować do jednego tylko znaku, łatwo domyślimy się, że oszczędność wykorzystywanego miejsca na dysku będzie ogromna.

***Współczynnik kompresji*** (ang. compression ratio) jest definiowany jako stosunek objętości danych skompresowanych (wyjściowych) do objętości danych oryginalnych (wejściowych), czyli jego wartość zawiera się w przedziale od 0 do 1. 

|                                 |                 Kompresja bezstra                 |                 Kompresja stratna                 |
|---------------------------------|---------------------------------------------------|---------------------------------------------------|
|                                 | Dane skompresowane są identyczne (bit po bicie) z danymi pierwotnymi               | Dane odtworzone są podobne do danych pierwotnych i na ogół różnią się od nich w sposób trudny do wychwycenia |
| Algorytmy kompresji bezstratnej | **Statyczne** – operują na pojedynczych blokach danych (np. znakach tekstu lub fragmentów obrazu). Bazują na tym, że znaki w tekście występują z różną częstotliwością. Przy użyciu kodu ASCI do zapisania każdego znaku potrzebujemy 8 bitów. Jeżeli do zapisu najczęściej używanych znaków wykorzystamy ciąg bitów o mniejszej długości (np. 2 lub 3 bity), uzyskamy znaczną oszczędność miejsca <br/>  **Słownikowe** – operują na ciągach bitów o zmiennej długości (w szczególności na ciągach znaków). Tekst jest przeglądany od początku do końca i jeżeli algorytm natrafi na ciąg znaków który pojawił się wcześniej, zamiast całego tekstu zapisywana jest jedynie informacja o miejscu, w którym wcześniej się pojawił. Najbardziej znanym algorytmem kompresji słownikowej, na którym bazują algorytmy wykorzystywane w programach takich jak WINZIP, WINRAR, jest algorytm LZW (od nazwisk autorów: Lempel-ZIv-Welch)| Algorytmy kompresji stratnej bazują na niedoskonałościach ludzkich zmysłów. Nie dostrzegamy np. niewielkich zmian barw lub drobnych różnic w fakturze powierzchni na obrazie. Algorytmy kompresji stratnej usuwają informacje o tych elementach, których człowiek nie jest w stanie dotrzeć lub usłyszeć. Takich informacji jest wiele i dlatego kompresja stratna jest bardzo efektywna. |
|                                 | Teksty, programy komputerowe, bazy danych, pliki z innymi danymi (pliki arkusza kalkulacyjnego, pliki konfiguracyjne, dane przesyłane w sieciach komputerowych itp.), niektóre rodzaje grafiki (np. GIF) <br/>  <br/>  **ZIP** – jeden z najczęściej używanych formatów kompresji bezstratnej i archiwizacji danych na platformie PC, zwłaszcza w środowisku Microsoft Windows. <br/>  **RAR** (od ang. Roshal archive) – stworzony przez Rosjanina Jewgienija Roszała. Używa odmiany kompresji LZSS, może być szyfrowany za pomocą AES-128. <br/>  **GIF** (ang. Graphics Interchange Format) – format pliku graficznego z kompresją bezstratną stworzony w 1987 roku przez firmę CompuServe. Pliki tego typu są powszechnie używane na stronachW WWW, gdyż pozwalają na tworzenie prostych animacji ze zdefiniowanym kolorem tła jako przezroczystym i określonym opóźnieniem przy odtwarzaniu poszczególnych klatek animacji. | Dźwięki (kompresja GSM wykorzystywana w telefonii komórkowej), muzyka, obrazy (JPEG), filmy <br/>  <br/>   **DivX/XviD** –  przy odpowiednich warunkach może skompresować zawartość płyty DVD na zwykłą CD, bez widocznych różnic. <br/>  **MPEG** – jedną z jego odmian stosuje się przy filmach na DVD, bardzo wysoka jakość, połączona z większymi objętościowo plikami (100 MB DivX = ok. 350 MB MPEG). <br/>  **MP3** –  najpopularniejsze kodowanie stratne audio, oparte na MDCT, stosuje model psychoakustyczny Instytutu Fraunhoffera i firmy Thomson|


##### Podział kompresji
***Kompresja bezstratna***  – ogólna nazwa metod kompresji informacji do postaci zawierającej zmniejszoną liczbę bitów, pod warunkiem że metoda ta gwarantuje możliwość odtworzenia informacji z postaci skompresowanej do identycznej postaci pierwotnej. Algorytmy kompresji bezstratnej dobrze kompresują "typowe" dane, czyli takie w których występuje znaczna nadmiarowość informacji (redundancja). Używane są przy kompresji tekstóœ, programów komputerowych, baz danych itp). Pewne rodzaje danych są bardzo trudne lub niemożliwe do skompresowania. Najczęściej używane metody kompresji bezstratnej można podzielić na słownikowe i statystyczne:
- ***metody słownikowe*** poszukują dokładnych wystąpień danego ciągu znaków, np. zastępują 'the' krótszą ilością bitów niż jest potrzebna na zakodowanie 4 niezwiązanych znaków. Jednak znajomość symbolu 'the ' nie pociąga za sobą usprawnień w kompresowaniu 'they' czy 'then'.
- ***metody statystyczne*** używają mniejszej ilości bitów dla częściej występujących symboli, w przypadku praktycznie wszystkich oprócz najprostszych metod, prawdopodobieństwa zależą od kontekstu. A więc np. dla 'h' występującego po 't' używają mniejszej ilości bitów niż dla innych znaków w tym kontekście.

***Kompresja stratna*** — metoda zmniejszania liczby bitów potrzebnych do wyrażenia danej informacji, które nie dają gwarancji, że odtworzona informacja będzie identyczna z oryginałem. Dla niektórych danych algorytm kompresji stratnej może odtworzyć informację w sposób identyczny. Algorytmy kompresji stratnej bazują na niedoskonałościach ludzkich zmysłów. Nie dostrze-gamy np. niewielkich zmian barw lub drobnych różnic w fakturze powierzchni na obrazie. Jeżeli u danym momencie brzmi wiele dźwięków, słyszymy tylko niektóre z nich itd. Na tym spostrzeżeniu bazują algorytmy kompresji stratnej i po prostu usuwają informacje o tych elementach, których nie jesteśmy w stanie dostrzec lub usłyszeć. Takich informacji jest zaskakująco wiele i dlatego kompresja stratna jest bardzo efektywna. Objętość pliku z obrazem lub dźwiękiem można zmniejszyć nawet dziesięciokrotnie bez zauważalnego dla obserwatora lub słuchacza pogorszenia jego jakości; dopiero przy dalszym zmniejszaniu objętości różnice zaczynają być odczuwalne. Zwykle kompresję stratną stosuje się do: obrazków(np. JPEG) dźwięków (np. MP3), ruchomych obrazów, np. w filmie (np. MPEG). Pozwala uzyskać stopień kopresji nawet do 90%. Pozwala określić współczynnik kompresji (im lepsza jakość tym większy rozmiar).


### Metody szyfrowania
***szyfrowanie*** to technikaKa umożliwiająca bezpieczne przesyłanie wiadomości. Nadawca wiadomości chciałby mieć pewność, że nikt niepowołany nie pozna treści wiadomości, ani też jej nie zmodyfikuje. Niezaszyfrowaną wiadomość nazywamy też tekstem jawnym, natomiast zaszyfrowaną — szyfrogramem. Nauka zajmująca się zabezpieczaniem wiadomości to kryptografia, natomiast kryptoanaliza to nauka o łamaniu tychże zabezpieczeń. Razem tworzą one kryptologię — osobną dziedzinę matematyki. Szyfrowanie i deszyfrowanie wykonuje się za pomocą odpowiednich funkcji mate-matycznych, często przy użyciu komputera. 

Szyfrowanie można podzielić na:
- ***szyfry podstawieniowe*** Szyfr w którym każdy znak tekstu jawnego zastępowany jest przez inny znak lub znaki szyfrogramu (np. szyfr Cezara). Ze względu na łatwość łamania tego rodzaju szyfrów, nie są one już stosowane.
- ***szyfry przestawieniowe*** Szyfry przestawieniowe dokonują przestawienia znaków w tekście. Szyfry te charakteryzują się tym, że w zaszyfrowanym tekście występują wszystkie znaki z tekstu jawnego, ale w innej kolejności. Szyfry należące do tej grupy zmieniają kolejność liter w szyfrowanym tekście według określonego schematu. Najczęściej przestawienia liter dokonuje się za pomocą figury geometrycznej.
- ***szyfr z kluczem jednorazowym** jest dużym zbiorem o niepowtarzalnych i przypadkowych sekwencjach znaków. Nadawca używa każdej litery z tego zbioru do zaszyfrowania jednego znaku tekstu jawnego. Szyfrowanie to dodanie modulo 26 jednego znaku tekstu jawnego i znaku jednorazowego klucza. Każdy klucz używany jest tylko raz, do zaszyfrowania tylko jednej wiadomości. Klucz tworzony jest w sposób losowy. Po zaszyfrowaniu wiadomości nadawca niszczy klucz. Odbiorca dysponuje identycznym kluczem i używa tych samych znaków zbioru do odszyfrowania każdego znaku szyfrogramu. Przy nadawaniu nowej wiadomości trzeba zastosować nowy zbiór znaków i nowe znaki klucza. Deszyfrowanie polega na odjęciu od wartości liczbowej odpowiedniego znaku szyfrogramu wartości liczbowej odpowiedniego znaku klucza; jeżeli otrzymana wartość jest ujemna lub zerowa, należy dodać do niej 26. W ten sposób otrzymuje-my wartość liczbową znaku tekstu oryginalnego. Zasadniczą słabością algorytmów z kluczem jest to, ze nadawca musi przekazać klucz odbiorcy. Z tego powodu proces komunikacji jest o wiele bardziej zawodny i nie zapewnia bezpieczeństwa przekazu.
- ***szyfr z kluczem jawnym** W algorytmach tych klucz szyfrujący jest inny niż klucz deszyfrujący. Klucz szyfrujący (zwany kluczem jawnym lub kluczem publicznym) można udostępnić każdemu, w celu zaszyfrowania wiadomości przeznaczonych dla odbiorcy. Jednak pasującym do klucza jawnego kluczem deszyfrującym (tzw. kluczem tajnym lub kluczem prywatnym) dysponuje tylko odbiorca wiadomości. Dzięki temu tylko on może odczytać zaszyfrowaną wiadomość. Najbardziej znanym algorytmem z kluczem jawnym jest algorytm RSA. Algorytm ten jest powszechnie stosowany w wielu produktach, takich jak pakiet szyfrowania PGP czy protokół bezpiecznych połączeń SSL, wykorzystywany przezz przeglądarki internetowe. 

## Symetryczne szyfrowanie klucza

znane również jako tajny klucz, używa tego samego klucza do szyfrowania, jak i odszyfrowywania informacji. Ten tajny klucz jest udostępniany tylko nadawcy i odbiorcy. Jeśli jednak strona zewnętrzna uzyska dostęp do tego klucza, szyfrowanie zostanie naruszone.

#### Istnieją dwa główne rodzaje algorytmów symetrycznych:
- **Strumieniowe** - opierające się na tym, iż komputer tworzy strumień szyfrujący równy długości wiadomości, którą chcemy zaszyfrować, a następnie przy użyciu operacji XOR (alternatywy wykluczającej) odpowiednie bity klucza są łączone z bitami wiadomości
- **Blokowe** - algorytm szyfrujący dzieli tekst jawny na bloki o pewnej wielkości a następnie każdy z tych bloków szyfruje oddzielnie

#### Przykładowe:
- **Advanced Encryption Standard (AES)** - Za pomocą AES wykorzystywany jest sekretny klucz o długości 128 lub 192 lub 256 bitów. W zależności od długości klucza wykonywana jest inna ilość rund szyfrujących kolejno 10,12,14. Szyfr symetryczny blokowy.\
  Zastosowanie:
   - Wirtualne sieci prywatne
   - Narzędzia archiwizacji i kompresji WinZip, 7 Zip i RAR.
 - **Data Encryption Standard XORed (DESX)** – przed zaszyfrowaniem z użyciem DES, dane są XORowane z dodatkowym ciągiem 64bitów, co nieco poprawia poziom bezpieczeństwa,
 - **Rivest’s Cipher verison 2 (RC2 – 40bit)** – algorytm blokowy, pracujący na blokach długości 64 bitów; wykorzystuje dodatkowo ciąg 40 bitów (tzw. salt) dodawany do klucza szyfrującego przed jego wykorzystaniem, 
 - **RC2 (128 bit)** – odmiana RC2 gdzie salt ma długość 88 bitów, 
 - **Triple DES (3DES)** – Odmiana DES, gdzie szyfrowanie odbywa się 3 razy z różnymi kluczami 56 bitowymi: najpierw dane są szyfrowane kluczem A , potem rozszyfrowywane kluczem B, a na koniec szyfrowane kluczem C. Razem daje to odpowiednik klucza 168 bitowego.
 - **RC4** - Długość klucza = do 2048 bitów, ochrona komunikacji w Internecie, zabezpieczenia sieci bezprzewodowych 

## Asymetryczne szyfrowanie klucza

Znane również jako asymetryczne algorytmy klucza, ten typ szyfrowania używa różnych kluczy do szyfrowania i odszyfrowywania danych. Używając zarówno klucza prywatnego (znanego tylko przez właściciela), jak i klucza publicznego (znanego innym osobom w tej samej sieci), informacje zaszyfrowane za pomocą klucza publicznego można odszyfrować wyłącznie za pomocą równoważnego klucza prywatnego.

#### Przykłady:
- **Diffie-Hellman key agreement (DH)** – nie służy do szyfrowania, lecz pozwala 2 stronom na bezpieczne uzgodnienie tajnego materiału kryptograficznego (np. klucza).
- **Rivest Shamir Adleman (RSA)** – algorytm służący do szyfrowania i podpisywania danych. Najczęściej wykorzystywany z kluczami 1024 bitowymi i dłuższymi. Długość klucza silnie wpływa na czas obliczeń. Gdy używany jest RSA, podpisywanie jest wolniejsze niż sprawdzanie podpisu. 
- **Digital Signature Algorithm (DSA)** – algorytm służący tylko do podpisywania. Obsługuje maksymalną długość klucza 1024 bity. Gdy używany jest DSA, podpisywanie jest szybsze niż sprawdzanie podpisu. 

## TL;DR 
### Kompresja danych 
to proces zmniejszenia objętości danych, czyli sposób zapisu danych, aby bez utraty ich treści (oraz jakości) ograniczyć liczbę wykorzystywanych bitów.

### Kompresję dzielimy na 
- **Bezstratną** – w której z postaci skompresowanej można odzyskać identyczną postać pierwotną.
- **Stratną** – w której odzyskanie identycznej postaci jest niemożliwe, jednak główne właściwości, które nas interesują, zostają zachowane.

Kompresje stratną nie można zastosować do każdego rodzaju danych. W tekstach, programach komputerowych itp. usunięcie/zamiana jednego bitu przyniosła by opłakane skutki.  Kompresje stratną stosujemy np. do plików graficznych i audio, gdzie ludzkie zmysły nie zauważą drobnych zmian barw czy różnic. Jeżeli w danym momencie brzmi wiele dźwięków słyszymy tylko niektóre z nich. Na tym bazują algorytmy kompresji stratnej i usuwają te elementy których nie jesteśmy w stanie dostrzec lub usłyszeć.

- **Szyfrowanie** – to technika umożliwiająca bezpieczne przesyłanie wiadomości, czyli pozwalająca na ukrycie jej tekstu. Niezaszyfrowaną wiadomość nazywamy tekstem jawnym, a zaszyfrowaną szyfrogramem.
- **Szyfrowanie podstawieniowe** - w którym każdy znak tekstu jawnego zastępowany jest przez inny znak, np. szyfr Cezara. Ze względu na łatwość łamania tego rodzaju szyfrów, nie są one już stosowane.
- **Szyfrowanie przestawieniowe** – w którym w tekście zaszyfrowanym pojawiają się wszystkie znaki tekstu jawnego, ale w innej kolejności.
- **Szyfrowanie z kluczem symetrycznym** – do sposobu szyfrowania dołączany jest klucz, bez którego znajomości nie odszyfrujemy danych. Nadawca jak i odbiorca muszę posiadać ten sam klucz. Wszystkie nowoczesne sposoby szyfrowania wykorzystują klucze.
- **Szyfrowanie z kluczem asymetrycznym** – jest to najlepsze szyfrowanie z wyżej wymienionych. W tych algorytmach klucz szyfrujący jest inny niż klucz deszyfrujący. Klucz jawny można udostępnić każdemu w celu zaszyfrowania wiadomości przeznaczonych dla odbiorcy. Jednak pasującym do klucza jawnego kluczem deszyfrującym (kluczem prywatnym) dysponuje tylko odbiorca wiadomości. Najbardziej znanym algorytmem z kluczem jawnym jest RSA.
